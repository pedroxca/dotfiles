#!/bin/bash


descricao=$(cat <<'EOF'

Abre uma procura de projetos git e seleciona um
EOF
)

source $HOME/.local/src/scripts/app/get-description.sh


source $HOME/.local/src/scripts/app/scripts-utils.sh

declare -A projetos

for dir in $(fd -H -t d -g '.git' "$WORKSPACE" -x dirname ); do
  nome_projeto=$(basename "$dir")
  projetos["$nome_projeto"]="$dir"
done

nome_selecionado=$(printf "%s\n" "${!projetos[@]}" | fzf --prompt="Selecione um projeto: " --exact --pointer="îªœ" --style full)

abort-if-empty "$nome_selecionado" "Nenhum projeto foi selecionado"

caminho_selecionado=${projetos[$nome_selecionado]}

echo "$caminho_selecionado"
